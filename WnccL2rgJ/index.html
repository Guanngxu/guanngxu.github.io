<html>

<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>
    学习 Angulr 容易忽略的知识点 | Guanngxu
</title>
<link rel="shortcut icon" href="https://www.guanngxu.com/favicon.ico?v=1769266443907">
<!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"> -->
<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://www.guanngxu.com/styles/main.css">
<!-- js -->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script src="https://www.guanngxu.com/media/js/jquery.sticky-sidebar.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7393078395398753" crossorigin="anonymous"></script>


        
</head>

<body>
    <div class="main">
        <div class="header">
    <div class="nav">
        <div class="logo">
            <a href="https://www.guanngxu.com">
                <img class="avatar" src="https://www.guanngxu.com/images/avatar.png?v=1769266443907" alt="">
            </a>
            <a href="https://www.guanngxu.com">
                <div class="site-title">
                    <h1>
                        Guanngxu
                    </h1>
                </div>
            </a>
        </div>
        <span class="menu-btn fa fa-align-justify"></span>
        <div class="menu-container">
            <ul>
                
                    
                            <li>
                                <a href="/archives" class="menu">
                                    归档
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/tags" class="menu">
                                    标签
                                </a>
                            </li>
                            
                                
                    
                        <li>
                            <a href="/about" class="menu" target="_blank">
                                关于
                            </a>
                        </li>
                        
                                
                    
                            <li>
                                <a href="https://guanngxu.com/uAv93EeJY" class="menu">
                                    工具
                                </a>
                            </li>
                            
                                
            </ul>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $(".menu-btn").click(function() {
            $(".menu-container").slideToggle();
        });
        $(window).resize(function() {

            if (window.matchMedia('(min-width: 960px)').matches) {
                $(".menu-container").css('display', 'block')
            } else {
                $(".menu-container").css('display', 'none')
            }

        });
    });
</script>

            <div id="main-content" class="post-detail main-container">
                <!-- left -->
                <div id="content" class="main-container-left">
                    <article class="post i-card">
                        <h2 class="post-title">
                            学习 Angulr 容易忽略的知识点
                        </h2>
                        <div class="post-info">
                            <time class="post-time">2018-09-25</time>
                            <span class="read-time">18 min read</span>
                            
                                <a href="https://www.guanngxu.com/6ys69eBdL/" class="post-tag i-tag
                            i-tag-other_2">
                            #前端
                        </a>
                                
                                <a href="https://www.guanngxu.com/EWmAbJCJGF/" class="post-tag i-tag
                            i-tag-other_1">
                            #TypeScript
                        </a>
                                
                                <a href="https://www.guanngxu.com/ovndYzDa7N/" class="post-tag i-tag
                            i-tag-info">
                            #JavaScript
                        </a>
                                
                                <a href="https://www.guanngxu.com/pkJGoZIqgD/" class="post-tag i-tag
                            i-tag-banana">
                            #Angular
                        </a>
                                
                        </div>
                        
                            <div class="post-feature-image" style="background-image: url('https://www.guanngxu.com/post-images/WnccL2rgJ.jpeg')"></div>
                            
                                <div class="post-content">
                                    <blockquote>
<p>参考内容：<br>
《Angulr5 高级编程（第二版）》</p>
</blockquote>
<h2 id="函数声明式和表达式">函数声明式和表达式</h2>
<pre><code class="language-javascript">// 第一种：函数声明式
myFunc();
function myFunc(){
    ...
}

// 第二种：函数表达式
myFunc();
let myFunc = function(){
    ...
}
</code></pre>
<p>虽然上面两种函数声明方式在大部分情况下是一样的，第一种可执行，第二种却不可以执行，这是因为浏览器在解析 js 时找到函数声明，并在执行剩余语句之前设置好函数，此过程称为<strong>函数提升</strong>，但是函数表达式却不会受到提升，因此无法正常工作。</p>
<h2 id="js-不具备多态性">js 不具备多态性</h2>
<p>js 重不能创建名称相同但参数不同的两个函数，它不具备这个多态性，比如你定义的函数中有两个形参，调用函数时只传一个参数，第二形参的值就是 undefined ，如果传的参数大于 3 个，那么会自动忽略多余的参数。可以使用下列方法来处理函数定义参数数量和用于调用函数实际参数数量之间不匹配的问题。</p>
<pre><code class="language-javascript">// 使用默认参数
let func = function(age, sex='男'){
    ...
}
func(23);

// 使用可变长参数
let func = function(age, sex, ...extraArgs){
    ...
}
func(23, '女', '张三', '深圳');
// 最后一个参数是一个数组，任何额外的实参都会被赋给这个数组
</code></pre>
<h2 id="let-和-war-的区别">let 和 war 的区别</h2>
<p>使用 let 和 var 声明变量的区别，使用 let 声明变量会把变量的作用范围限定在它所在的代码区域内。而使用 var 所创建的变量的作用域是它所在的函数。</p>
<pre><code class="language-javascript">function func(){
    if(false){
        var age = 23;
    }
}

// 上面的代码会被解析成下面的形式，使用 let 则不会出现这样的结果

function func(){
    var age;
    if(false){
        age = 23;
    }
}
</code></pre>
<h2 id="相等-和恒等-以及-连接操作符">相等 == 和恒等 === 以及 连接操作符 +</h2>
<p>相等操作符尝试将操作数强制转换为相同的类型，再评估是否相等，实质上相等操作符<code>==</code>是测试二者的值是否相等，而与二者的类型无关；如果要测试值和类型是否都相等则应该用恒等操作符<code>===</code>。</p>
<pre><code class="language-javascript">5 == '5' // 结果为 true
5 === '5' // 结果为 false
</code></pre>
<p>在 js 中，连接操作符的优先级高于加法操作，也就是说<code>5 + '5'</code>的结果是<code>55</code>。</p>
<h2 id="不同的模块指定方式">不同的模块指定方式</h2>
<pre><code class="language-javascript">import { Name } from &quot;./modules/NameUtil&quot;;// 第一种
import { Compont } from &quot;@angular/core&quot;;// 第二种
</code></pre>
<p>上面两种导入模块的方式有所不同，第一种是相对模块，第二种是非相对导入。第一种告诉的 TypeScript 编译器，该模块所在的位置是相对于包含 import 语句的文件而言；第二种非相对导入，编译器会用 node_modules 文件夹中的 npm 包来解析它。</p>
<p>如果在导入模块时，出现需要导入两个不同模块但是名字却相同的情况，可以使用<code>as</code>关键字给导入的模块取一个别名。</p>
<pre><code class="language-javascript">import { Name as otherName } from &quot;./modules/Name&quot;;//取别名
</code></pre>
<p>还有一种方法是将模块作为对象导入，如下 import 所示，导入 Name 模块的内容，并创建一个名为 otherName 的对象，然后就可以使用该对象的属性了。</p>
<pre><code class="language-javascript">import * as otherName from &quot;./modules/NameUtil&quot;;
let name = new otherName.Name(&quot;Admin&quot;, &quot;China&quot;);// Name 是 NameUtil 中的类
</code></pre>
<h2 id="多类型和类型断言">多类型和类型断言</h2>
<p>在 ts 中允许指定多个类型，使用字符<code>|</code>进行分隔。看下面的的方法，其功能是把华氏温度转换为摄氏温度。</p>
<pre><code class="language-javascript">// 使用多类型，该函数可以传入 number 和 string 类型的参数
static convertFtoC(temp: number | string): string {
    /*
    尝试使用 &lt;&gt; 声明一个类型断言，将一个对象转换为指定类型，也可以使用 as 关键字实现下列相同的效果
    let value: number = (temp as number).toPrecision ? temp as number : parseFloat(temp as string);
    */
    let value: number = (&lt;number&gt;temp).toPrecision ? &lt;number&gt;temp : parseFloat(&lt;string&gt;temp);
    return ((parseFloat(value.toPrecision(2)) - 32) / 1.8).toFixed(1);
}
</code></pre>
<p>元组是固定长度的数组，数组的每一项都是指定的类型；可索引类型可以将键与值关联起来，创建类似于 map 的集合。</p>
<pre><code class="language-javascript">// 元组
let tuple: [string, string, string];
tuple = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;];

// 可索引类型
let cities: {[index: string] : [string, string]} = {};
cities[&quot;Beijing&quot;] = [&quot;raining&quot;, &quot;2摄氏度&quot;];
</code></pre>
<h2 id="数据绑定">数据绑定</h2>
<pre><code class="language-javascript">[target]=&quot;expr&quot;// 方括号表示单向绑定，数据从表达式流向目标；

(target)=&quot;expr&quot;// 圆括号表示单向绑定，数据从目标流向表达式，用于处理事件的绑定；
[(target)]=&quot;expr&quot;// 圆方括号组合表示双向绑定，数据在表达式与目标之间双向流动；
{{ expression }}// 字符串插入绑定。
</code></pre>
<p>[] 绑定有很多不同的形式，下面介绍不同表现形式的效果。</p>
<pre><code class="language-html">&lt;!-- 
    标准属性绑定（dom对象有的属性），将 input 的 value 属性绑定到一个表达式的结果
    因为 model.getProduct(1) 可能返回 null ，所以使用模板空条件操作符 ? 浏览返回结果
    如果返回不为空，那么将读取 name 属性，否则由 null 合并操作符 || 将结果设置为 None
    字符串插入绑定也可以使用这种表达式
 --&gt;
&lt;input [value]=&quot;model.getProduct(1)?.name || 'None'&quot;&gt;

&lt;!-- 
    元素属性绑定，有时候我们需要绑定的属性在 DOMAPI 上面没有
    可以使用通过在属性名称前加上 attr 前缀的方式来定义目标
 --&gt;
&lt;td [attr.colspan]=&quot;model.getProducts().length&quot;&gt;
    {{ model.getProduct(1)?.name || 'None' }}
&lt;/td&gt;

&lt;!-- 还有其他的 ngClass，ngStyle 等绑定，理解大体上和上面差不多 --&gt;
</code></pre>
<h2 id="内置指令">内置指令</h2>
<pre><code class="language-html">&lt;!-- 
    ngIf指令，如果表达式求值结果为 true ，那么 ngIf 将宿主元素机器内容包含在 html 文件中
    指令前面的星号表示这是一条微模板指令
    组要注意的是，ngIf 会向 html 中添加元素，也会从中删除元素，并非只是显示和隐藏
    如果只是控制可见性，可以使用属性绑定挥着样式绑定
 --&gt;
&lt;div *ngIf=&quot;expr&quot;&gt;&lt;/div&gt;

&lt;!-- 
    ngSwitch指令，
 --&gt;
&lt;div [ngSwitch]=&quot;expr&quot;&gt;
    &lt;span *ngSwitchCase=&quot;expr&quot;&gt;&lt;/span&gt;
    &lt;span *ngSwitchDefault&gt;&lt;/span&gt;
&lt;/div&gt;

&lt;!-- 
    ngFor指令，见名知意，为数组中的每个对象生成同一组元素
    ngFor 指令还支持其他的一系列可赋给变量的值，有如下局部模板变量
    
    index：当前对象的位置
    odd：如果当前对象的位置为奇数，那么这个布尔值为 true
    even：同上相反
    first：如果为第一条记录，那么为 true
    last：同上相反
 --&gt;
&lt;div *ngFor=&quot;let item of expr; let i = index&quot;&gt;
    {{ i }}
&lt;/div&gt;

&lt;!-- 
    ngTemplateOutlet指令，用于重复模板中的内容块
    其用法如下所示，需要给源元素指定一个 id 值
    
    &lt;ng-template #titleTemplate&gt;
        &lt;h1&gt;我是重复的元素哦&lt;/h1&gt;
    &lt;/ng-template&gt;
    &lt;ng-template [ngTemplateOutlet]=&quot;titleTemplate&quot;&gt;&lt;/ng-template&gt;
    ...省略若万行 html 代码
    &lt;ng-template [ngTemplateOutlet]=&quot;titleTemplate&quot;&gt;&lt;/ng-template&gt;
 --&gt;
&lt;ng-template [ngTemplateOutlet]=&quot;myTempl&quot;&gt;&lt;/ng-template&gt;

&lt;!-- 
    下面两个指令就是见名知意了，不解释
 --&gt;
&lt;div ngClass=&quot;expr&quot;&gt;&lt;/div&gt;
&lt;div ngStyle=&quot;expr&quot;&gt;&lt;/div&gt;
</code></pre>
<h2 id="事件绑定">事件绑定</h2>
<p>事件绑定使用 <code>(target)=&quot;expr&quot;</code>，是单向绑定，数据从目标流向表达式，用于响应宿主元素发送的事件。</p>
<p>当浏览器触发一个时间时，它将提供一个对象来描述该事件，对于不同类型的事件有不同类型的事件对象，事件对象被赋给一个名为<code>$event</code>的模板变量，但是所有事件对象都有下面三个属性:</p>
<pre><code class="language-html">type：返回一个 string 值，用于标识已触发事件类型；
target：返回触发事件的对象，一般是 html元素对象。
timeStamp：返回事件触发事件的 number 值，用 1970.1.1 毫秒数表示。
</code></pre>
<p>下面举几个例子，作为理解帮助使用。</p>
<pre><code class="language-html">&lt;!-- 当数鼠标在上面移动时，就会触发 mouseover 事件 --&gt;
&lt;td *ngFor=&quot;let item of getProducts()&quot; (mouseover)=&quot;selectedProduct = item.name&quot;&gt;&lt;/td&gt;

&lt;!-- 当用户编辑 input 元素的内容时就会触发 input 事件 --&gt;
&lt;input (input)=&quot;selectedProduct=$event.target.value&quot; /&gt;

&lt;input (keyup)=&quot;selectedProduct=product.value&quot; /&gt;
&lt;!-- 使用事件过滤，上面的写法按下任何一个键都会触发事件，而下面的写法只有回车事件才会触发事件 --&gt;
&lt;input (keyup.enter=&quot;selectedProduct=product.value&quot;) /&gt;
</code></pre>
<h2 id="表单验证">表单验证</h2>
<p>Angular 提供了一套可扩展的系统来验证表单元素的内容，总共可以向 input表元素中添加 4 个属性，每个属性定义一条验证规则，如下所示：</p>
<pre><code class="language-html">required：用于指定必须填写值；
minlength：用于指定最小字符数；
maxlength：用于指定最大字符数，（不能在表单元素直接使用，因为它与同名的 H5 属性冲突）；
pattern：该属性用于指定用户填写的值必须匹配正则表达式
</code></pre>
<pre><code class="language-html">&lt;!-- 
    Angular 要求验证的元素必须定义 name 属性
    由于 Angular 使用的验证属性和 H5 规范使用的验证属性相同，
    所以向表单元素中添加 novalidate 属性，告诉浏览器不要使用原生验证功能
    ngSubmit 绑定表单元素的 submit 事件
 --&gt;
&lt;form novalidate (ngSubmit)=&quot;addProduct(newProduct)&quot;&gt;
    &lt;input class=&quot;form-control&quot;
        name=&quot;name&quot;
        [(ngModel)]=&quot;newProduct.name&quot;
        required
        minlength=&quot;5&quot;
        pattern=&quot;^[A-Za-z]+$&quot; /&gt;
    &lt;button type=&quot;submit&quot;&gt;提交&lt;/button&gt;
&lt;/form&gt;
</code></pre>
<p>Angular 提供了 3 对验证 CSS 类，这些类可以用于样式化表单元素，向用户提供验证反馈，具体说明如下所示。</p>
<pre><code class="language-html">ng-untouched ng-touched：如果一个元素未被用户访问，就将其加入到 nguntouched 类中；一旦访问就加入到 ngtouched 类中。
ng-prisstine ng-dirty：元素内容没有被改变被加入到 ng-prisstine 类中，否则将其加入到 ng-dirty 类中。
ng-valid ng-invalid：如果满足验证规则定义的条件，就加入到 ng-valid 类中，否则加入到 ng-invalid 类中。
</code></pre>
<p>在实际使用过程中，直接定义对应的样式即可，如下所示：</p>
<pre><code class="language-html">&lt;style&gt;
input.ng-dirty.ng-invalid{
    border: 2px solid red;
}
input.ng-dirty.ng-valid{
    border: 2px solid green;
}
&lt;/style&gt;
&lt;form novalidate (ngSubmit)=&quot;addProduct(newProduct)&quot;&gt;
    &lt;input class=&quot;form-control&quot;
        name=&quot;name&quot;
        [(ngModel)]=&quot;newProduct.name&quot;
        required
        minlength=&quot;5&quot;
        pattern=&quot;^[A-Za-z]+$&quot; /&gt;
    &lt;button type=&quot;submit&quot;&gt;提交&lt;/button&gt;
&lt;/form&gt;
</code></pre>
<p>上面的验证方式无法给用户提供更加具体的信息，用户不知道应该做什么，可以使用 ngModel 指令来访问宿主元素的验证状态，当存在验证错误的时候，使用该指令向用户提供指导性信息。</p>
<pre><code class="language-html">&lt;form novalidate (ngSubmit)=&quot;addProduct(newProduct)&quot;&gt;
    &lt;input class=&quot;form-control&quot;
        #nameRef=&quot;ngModel&quot;
        name=&quot;name&quot;
        [(ngModel)]=&quot;newProduct.name&quot;
        required
        minlength=&quot;5&quot;
        pattern=&quot;^[A-Za-z]+$&quot; /&gt;
    &lt;ul class=&quot;text-danger list-unstyled&quot;
        *ngIf=&quot;name.dirty &amp;&amp; name.invalid&quot;&gt;
        &lt;li *ngIf=&quot;name.errors?required&quot;&gt;
            you must enter a product name
        &lt;/li&gt;
        &lt;li *ngIf=&quot;name.errors?.pattern&quot;&gt;
            product name can only contain letters and spases
        &lt;/li&gt;
        &lt;li *ngIf=&quot;name.errors?minlength&quot;&gt;
            &lt;!-- 
                Angular 表单验证错误描述属性
                required：如果属性已被应用于 input 元素，此属性返回 true
                minlength.requiredLength：返回满足 minlength 属性所需的字符数
                minlength.actualLength：返回用户输入的字符数
                pattern.requiredPattern：返回使用 pattern 属性指定的正则表达式
                pattern.actualValue：返回元素的内容
             --&gt;
            product name must be at least {{ name.errors.minlength.requiredLenth }} characters
        &lt;/li&gt;
    &lt;/ul&gt;
    &lt;button type=&quot;submit&quot;&gt;提交&lt;/button&gt;
&lt;/form&gt;
</code></pre>
<p>如果在用户尝试提交表单时就显示大量的错误信息，给人的体验感就会很差，所以可以让用户提交表单时再验证整个表单，示例代码如下所示。</p>
<pre><code class="language-javascript">export class ProductionCompont {
    // ...省略若万行代码
    formSubmited: boolean = false;

    submitForm(form: ngForm) {
        this.formSubmited = true;
        if(form.valid) {
            this.addProduct(this.newProduct);
            this.newProduct = new Product();
            form.reset();
            this.formSubmited = true;
        }
    }
}
</code></pre>
<pre><code class="language-html">&lt;form novalidate #formRef=&quot;ngForm&quot; (ngSubmit)=&quot;submitForm(formRef)&quot;&gt;
    &lt;div *ngIf=&quot;formsubmited &amp;&amp; formRef.invalid&quot;&gt;
        there are problems with the form
    &lt;/div&gt;
    &lt;!-- 禁用提交按钮，验证成功提交按钮才可用 --&gt;
    &lt;button [disabled]=&quot;formSubmited &amp;&amp; formRef.valid&quot;&gt;提交&lt;/button&gt;
&lt;/form&gt;
</code></pre>
<p>fromSubmited 属性用于指示表单是否已经提交，并将用于在用户提交整个表单之前阻止表单验证。当用户提交表单时，调用 submitForm 方法，并将 ngForm 对象作为实参传入，ngForm 提供了 reset 方法，该方法可以重置表单的验证状态，使其返回到最初的未访问状态。</p>
<p><strong>更高级的还有使用基于模型的表单验证，可以自行查阅相关资料。</strong></p>
<h2 id="使用-json-server-模拟-web-服务">使用 json-server 模拟 web 服务</h2>
<p>因为<code>json-server</code>会经常用到，建议使用全局安装命令<code>npm install -g json-server</code>。因为开发后端的同学太慢了，而我们如果要等他们把接口都提供给我们的时候再开发程序的话，那效率就太低了，所以使用 json-server 来模拟后端服务。只需要建好一个 json 文件，比如下面的格式：</p>
<pre><code class="language-json">{
    &quot;user&quot; : [
        {
            &quot;name&quot; : &quot;张三&quot;,
            &quot;number&quot; : &quot;1234&quot;,
        },
        {
            &quot;name&quot; : &quot;王二&quot;,
            &quot;number&quot; : &quot;5678&quot;,
        }
    ],
    &quot;praise&quot;: [
        {&quot;info&quot;:&quot;我是一只小老虎呀！&quot;},
        {&quot;info&quot;:&quot;我才是大老虎&quot;}
    ]
}
</code></pre>
<p>启动服务使用命令<code>json-server [你的 json 文件路径]</code>，然后就可以根据提示访问了，你甚至可以使用<code>http://localhost:3000/user?number=5678</code>去过滤数据。这样就能模拟 web 服务，而不必等后端同学的进度了。</p>
<h2 id="解决跨域请求问题">解决跨域请求问题</h2>
<p>Angular 跨域请求问题可以通过 Angular 自身的代理转发功能解决，在项目文件夹下新建一个 proxy.conf.json 并在其中添加如下内容。</p>
<pre><code class="language-json">// 可以通过下列配置解决
&quot;/api&quot;: {
    &quot;target&quot;: &quot;http://10.9.176.120:8888&quot;,
}
</code></pre>
<p>在启动时使用<code>npm start</code>，或者使用<code>ng serve  --proxy-config proxy.conf.json</code>，Anular 中的<code>/api</code>请求就会被转发到 <code>http://10.9.176.120:8888/api</code>，从而解决跨域请求问题。</p>
<h2 id="使用第三方-js-插件">使用第三方 js 插件</h2>
<p>共有三种方式引入第三方插件，第一种很简单，直接在 html 中引入插件就可以了；第二种在<code>angular.json</code>中进行配置；第三种在 ts 文件中使用 import 导入库即可。</p>
<pre><code class="language-javascript">// 第一种(需要重启服务)
&quot;scripts&quot;: [&quot;src/assets/jquery-3.2.1.js&quot;,&quot;src/assets/jquery.nicescroll.js&quot;,&quot;src/assets/ion.rangeSlider.js&quot;]

// 第二种
&lt;script type=&quot;text/javascript&quot; src=&quot;assets/jquery-3.2.1.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;assets/jquery.nicescroll.js&quot;&gt;&lt;/script&gt;

// 第三种
import &quot;assets/jquery-3.2.1.js&quot;;
import &quot;assets/jquery.nicescroll.js&quot;;
import &quot;assets/ion.rangeSlider.js&quot;;
</code></pre>
<h2 id="深拷贝与浅拷贝">深拷贝与浅拷贝</h2>
<p>深拷贝与浅拷贝是围绕<strong>引用类型变量</strong>说的，其本质区别是不可变性，基本类型是不可变得，而引用类型是可变的。</p>
<p>直接使用赋值操作符，就是浅拷贝，如果对拷贝源进行操作，会直接影响在拷贝目标上，因为这个赋值行为本质是内存地址的赋值，为了获得与拷贝源完全相同但又不会影响彼此的对象就要使用深拷贝。</p>
<pre><code class="language-javascript">let objA = {
    x: 1,
    y: -1
}
let objB = objA;
objA.x++;
console.log(&quot;objA.x:&quot;+objA.x, &quot;objB.x:&quot;+objB.x);
//打印结果如下：
objA.x : 2 
objB.x : 2
</code></pre>
<p>Typescript 提供了一种方法来实现引用类型的深拷贝，即<code>Object.assign(target, ...source)</code>，此方法接受多个参数，第一个参数为拷贝目标，剩余参数为拷贝源，同名属性会进行覆盖。</p>
<pre><code class="language-javascript">let objA = {
    x: 1,
    y: -1,
    c: {
        d: 1,
    }
}
let objB = {};
Object.assign(objB, objA);
objA.x++;
console.log(&quot;objA.x:&quot;+objA[&quot;x&quot;], &quot;objB.x:&quot;+objB[&quot;x&quot;]);
//打印结果如下：
objA.x : 2 
objB.x : 1
</code></pre>
<p>需要注意的是，Typescript 提供的深拷贝方法不能实现嵌套对象的深拷贝，会出现下面的情况。</p>
<pre><code class="language-javascript">let objA = {
    x: 1,
    y: -1,
    c: {
        d: 1,
    }
}
let objB = {};
Object.assign(objB, objA);
objA.c.d++;
console.log(&quot;objA.c.d:&quot;+objA[&quot;c&quot;].d, &quot;objB.c.d:&quot;+objB[&quot;c&quot;].d);
//打印结果如下：
objA.c.d : 2 
objB.c.d : 2
</code></pre>
<p>要实现嵌套对象的深拷贝，可以使用 JSON 对象提供的方法，JSON 对象提供了两个方法，分别为：<code>stringify()</code>和<code>parse()</code>，前者将对象 JSON 化，后者将 JSON 对象化，使用这种方式可以实现嵌套深拷贝，但是也有缺点：破坏原型链，不能拷贝属性值为 function 的属性。</p>
<pre><code class="language-javascript">let objA = {
    a: 1,
    b: {
        c: 1
    }
}
let objB = JSON.parse(JSON.stringify(objA));
objA.b.c++;
console.log(&quot;objA.b.c:&quot;+objA.b.c, &quot;objB.b.c:&quot;+objB.b.c);

//打印结果如下：
objA.b.c:2
objB.b.c:1
</code></pre>

                                </div>
                    </article>
                    <!--  -->
                    
                        <div class="next-post">
                            <div class="next">下一篇</div>
                            <a href="https://www.guanngxu.com/wfWg7oC32/">
                                <h3 class="post-title">
                                    读大学的几点建议
                                </h3>
                            </a>
                        </div>
                        
                            <div id="disqus_thread"></div>
                            <div id="gitalk-container"></div>
                </div>
                <!-- middle -->
                <div class="main-container-middle"></div>
                <!-- right -->
                <div id="sidebar" class="main-container-right">
                    <!-- id-card -->
                    
    <div class="id_card i-card">
        <div class="id_card-avatar">
            <img src="https://www.guanngxu.com/images/avatar.png?v=1769266443907">
        </div>
        <h1 class="id_card-title">
            Guanngxu
        </h1>
        <h2 class="id_card-description">
            Keep trying
        </h2>
        <!--  -->
        <div class="id_card-sns">
            <!-- github -->
            
                <a href="https://github.com/Guanngxu" target="_blank" rel="noopener noreferrer"><i
                class="fa fa-github"></i></a>
                
                    <!-- twitter -->
                    
                        <a href="https://twitter.com/guanngxu" target="_blank" rel="noopener noreferrer"><i
                class="fa fa-twitter"></i></a>
                        
                            <!-- weibo -->
                            
                                <a href="https://weibo.com/u/5288280194" target="_blank" rel="noopener noreferrer"><i
                class="fa fa-weibo"></i></a>
                                
                                    <!-- facebook -->
                                    
                                        <!-- douban -->
                                        
                                            <a href="https://www.douban.com/people/Guanngxu" target="_blank" rel="noopener noreferrer">
                                                <svg t="1660751300927" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2563" width="200" height="200"><path d="M1023.979 862.827A161.152 161.152 0 0 1 862.805 1024H161.173A161.152 161.152 0 0 1 0 862.827V161.195A161.195 161.195 0 0 1 161.173 0.02h701.632a161.195 161.195 0 0 1 161.174 161.174v701.632z" fill="#515151" p-id="2564" data-spm-anchor-id="a313x.7781069.0.i2" class="selected"></path><path d="M218.56 208.064h586.816v66.09H218.56z m535.83 393.493v-258.41h-484.8v258.41h484.8zM339.882 409.173H684.8v126.358H339.883V409.173z m309.61 341.334c21.099-32.299 41.003-69.739 59.435-112.256l-70.507-25.707c-18.346 50.368-39.701 96.427-64 137.941H451.712c-20.373-53.802-43.328-99.818-69.077-137.941l-64.854 25.707c26.752 40.128 48.32 77.482 64.854 112.256H201.94v65.386h620.054v-65.386H649.493z" fill="#FFFFFF" p-id="2565" data-spm-anchor-id="a313x.7781069.0.i3" class=""></path></svg>
                                            </a>
                                        

        </div>
    </div>
    
    <script>
        // const date = new Date();
        // const today = date.toISOString().substring(0, 10);
        // console.info(today)
        // $.ajax({
        //     url: `http://sentence.iciba.com/index.php?c=dailysentence&m=getdetail&title=${today}`,
        //     type: "GET",
        //     dataType: "jsonp", //指定服务器返回的数据类型
        //     success: function (data) {
        //         $(".id_card-description").text(data.content)
        //         console.log(data);
        //     }
        // });
    </script>
                    
                        <!-- toc -->
                        
    <div class="toc-card i-card ">
        <div class="toc-title i-card-title">目录</div>
        <div class="toc-content">
            <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E5%87%BD%E6%95%B0%E5%A3%B0%E6%98%8E%E5%BC%8F%E5%92%8C%E8%A1%A8%E8%BE%BE%E5%BC%8F">函数声明式和表达式</a></li>
<li><a href="#js-%E4%B8%8D%E5%85%B7%E5%A4%87%E5%A4%9A%E6%80%81%E6%80%A7">js 不具备多态性</a></li>
<li><a href="#let-%E5%92%8C-war-%E7%9A%84%E5%8C%BA%E5%88%AB">let 和 war 的区别</a></li>
<li><a href="#%E7%9B%B8%E7%AD%89-%E5%92%8C%E6%81%92%E7%AD%89-%E4%BB%A5%E5%8F%8A-%E8%BF%9E%E6%8E%A5%E6%93%8D%E4%BD%9C%E7%AC%A6">相等 == 和恒等 === 以及 连接操作符 +</a></li>
<li><a href="#%E4%B8%8D%E5%90%8C%E7%9A%84%E6%A8%A1%E5%9D%97%E6%8C%87%E5%AE%9A%E6%96%B9%E5%BC%8F">不同的模块指定方式</a></li>
<li><a href="#%E5%A4%9A%E7%B1%BB%E5%9E%8B%E5%92%8C%E7%B1%BB%E5%9E%8B%E6%96%AD%E8%A8%80">多类型和类型断言</a></li>
<li><a href="#%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A">数据绑定</a></li>
<li><a href="#%E5%86%85%E7%BD%AE%E6%8C%87%E4%BB%A4">内置指令</a></li>
<li><a href="#%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A">事件绑定</a></li>
<li><a href="#%E8%A1%A8%E5%8D%95%E9%AA%8C%E8%AF%81">表单验证</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8-json-server-%E6%A8%A1%E6%8B%9F-web-%E6%9C%8D%E5%8A%A1">使用 json-server 模拟 web 服务</a></li>
<li><a href="#%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82%E9%97%AE%E9%A2%98">解决跨域请求问题</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E7%AC%AC%E4%B8%89%E6%96%B9-js-%E6%8F%92%E4%BB%B6">使用第三方 js 插件</a></li>
<li><a href="#%E6%B7%B1%E6%8B%B7%E8%B4%9D%E4%B8%8E%E6%B5%85%E6%8B%B7%E8%B4%9D">深拷贝与浅拷贝</a></li>
</ul>
</li>
</ul>

        </div>
        <script>
            function locateCatelogList() {
                /*获取文章目录集合,可通过:header过滤器*/
                var alis = $('.post-content :header');
                /*获取侧边栏目录列表集合**/
                var sidebar_alis = $('.markdownIt-TOC a');
                /*获取滚动条到顶部的距离*/
                var scroll_height = $(window).scrollTop();
                for (var i = 0; i < alis.length; i++) {
                    /*获取锚点集合中的元素分别到顶点的距离*/
                    var a_height = $(alis[i]).offset().top - 50; // 因为 header 占了 50
                    if (a_height < scroll_height) {
                        /*高亮显示*/
                        sidebar_alis.removeClass('on');
                        $(sidebar_alis[i]).addClass('on');
                    }
                }
            }
            $(function() {
                /*绑定滚动事件 */
                $(window).bind('scroll', locateCatelogList);
            });
        </script>
    </div>
    
                    
                    <!-- 标签云 -->
                    <div class="tags_card i-card">
    <h2 class="tags_card-title">
        标签云
    </h2>
    <div class="tags-card-container">
        
        <a class="tags-tag i-tag
            i-tag-info" href="https://www.guanngxu.com/sQhfLtj4g/">
            计算机网络
        </a>
        
        <a class="tags-tag i-tag
            i-tag-warning" href="https://www.guanngxu.com/_7KBEW1cq7/">
            Python
        </a>
        
        <a class="tags-tag i-tag
            i-tag-other_3" href="https://www.guanngxu.com/GndhdyXw87/">
            哈夫曼树
        </a>
        
        <a class="tags-tag i-tag
            i-tag-other_2" href="https://www.guanngxu.com/krqSF7tYC/">
            算法
        </a>
        
        <a class="tags-tag i-tag
            i-tag-other_3" href="https://www.guanngxu.com/HoPoXlgLN/">
            线性稳压器
        </a>
        
        <a class="tags-tag i-tag
            i-tag-warning" href="https://www.guanngxu.com/jSM-A51qWd/">
            LDO
        </a>
        
        <a class="tags-tag i-tag
            i-tag-banana" href="https://www.guanngxu.com/QbHW4oh0b/">
            开关电源
        </a>
        
        <a class="tags-tag i-tag
            i-tag-other_3" href="https://www.guanngxu.com/g-HWNOeTH/">
            BUCK
        </a>
        
        <a class="tags-tag i-tag
            i-tag-other_3" href="https://www.guanngxu.com/f2t0BU6fkn/">
            DC-DC
        </a>
        
        <a class="tags-tag i-tag
            i-tag-other_4" href="https://www.guanngxu.com/pCdNazHt7/">
            电路基础
        </a>
        
        <a class="tags-tag i-tag
            i-tag-primary" href="https://www.guanngxu.com/COeYlWWen/">
            PCB
        </a>
        
        <a class="tags-tag i-tag
            i-tag-other_1" href="https://www.guanngxu.com/ypjmBXLlm3/">
            Layout
        </a>
        
        <a class="tags-tag i-tag
            i-tag-other_3" href="https://www.guanngxu.com/ONdBQtmOe/">
            电平转换
        </a>
        
        <a class="tags-tag i-tag
            i-tag-other_1" href="https://www.guanngxu.com/umBdDP7Ll/">
            C
        </a>
        
        <a class="tags-tag i-tag
            i-tag-" href="https://www.guanngxu.com/M4PlaWNdk/">
            Oracle
        </a>
        
        <a class="tags-tag i-tag
            i-tag-other_4" href="https://www.guanngxu.com/ecG5hxBcr/">
            数据库
        </a>
        
        <a class="tags-tag i-tag
            i-tag-other_1" href="https://www.guanngxu.com/hF3_PWTirK/">
            Java
        </a>
        
        <a class="tags-tag i-tag
            i-tag-info" href="https://www.guanngxu.com/vnEfA3xxL/">
            嵌入式
        </a>
        
        <a class="tags-tag i-tag
            i-tag-other_2" href="https://www.guanngxu.com/mZ_iBKmVWo/">
            操作系统
        </a>
        
        <a class="tags-tag i-tag
            i-tag-success" href="https://www.guanngxu.com/Ykw3uqJED/">
            随笔思考
        </a>
        
        <a class="tags-tag i-tag
            i-tag-other_1" href="https://www.guanngxu.com/wgJXq4UXE/">
            Git
        </a>
        
        <a class="tags-tag i-tag
            i-tag-other_3" href="https://www.guanngxu.com/BDX4-XwWJ/">
            信用卡
        </a>
        
        <a class="tags-tag i-tag
            i-tag-other_2" href="https://www.guanngxu.com/ML7-KNp5c/">
            赚钱套利
        </a>
        
        <a class="tags-tag i-tag
            i-tag-other_1" href="https://www.guanngxu.com/3pFNTYNB8/">
            翻译摘录
        </a>
        
        <a class="tags-tag i-tag
            i-tag-success" href="https://www.guanngxu.com/ndHrBQqET/">
            社会经验
        </a>
        
        <a class="tags-tag i-tag
            i-tag-" href="https://www.guanngxu.com/mVmVUsbMe/">
            工具教程
        </a>
        
        <a class="tags-tag i-tag
            i-tag-info" href="https://www.guanngxu.com/6ZjSGnvm9/">
            年度总结
        </a>
        
        <a class="tags-tag i-tag
            i-tag-" href="https://www.guanngxu.com/u3bra3rlo/">
            健康生活
        </a>
        
        <a class="tags-tag i-tag
            i-tag-success" href="https://www.guanngxu.com/QNwNfWJcwj/">
            灰产骗局
        </a>
        
        <a class="tags-tag i-tag
            i-tag-other_2" href="https://www.guanngxu.com/wjM4wf9IE/">
            MySQL
        </a>
        
        <a class="tags-tag i-tag
            i-tag-other_4" href="https://www.guanngxu.com/dTizl9yei/">
            SEO
        </a>
        
        <a class="tags-tag i-tag
            i-tag-other_4" href="https://www.guanngxu.com/7QbLXmeen/">
            Vue
        </a>
        
        <a class="tags-tag i-tag
            i-tag-banana" href="https://www.guanngxu.com/6ys69eBdL/">
            前端
        </a>
        
        <a class="tags-tag i-tag
            i-tag-other_2" href="https://www.guanngxu.com/EWmAbJCJGF/">
            TypeScript
        </a>
        
        <a class="tags-tag i-tag
            i-tag-other_4" href="https://www.guanngxu.com/ovndYzDa7N/">
            JavaScript
        </a>
        
        <a class="tags-tag i-tag
            i-tag-info" href="https://www.guanngxu.com/iqW8DWbw7/">
            MongoDB
        </a>
        
        <a class="tags-tag i-tag
            i-tag-banana" href="https://www.guanngxu.com/XcHzo7Nc6/">
            正则表达式
        </a>
        
        <a class="tags-tag i-tag
            i-tag-other_1" href="https://www.guanngxu.com/UGoTtZqQ-y/">
            编译原理
        </a>
        
        <a class="tags-tag i-tag
            i-tag-primary" href="https://www.guanngxu.com/j7DVou3EA/">
            Nginx
        </a>
        
        <a class="tags-tag i-tag
            i-tag-other_4" href="https://www.guanngxu.com/KCICs8Iip/">
            记录回忆
        </a>
        
        <a class="tags-tag i-tag
            i-tag-banana" href="https://www.guanngxu.com/9WeHlVlqK9/">
            软件测试
        </a>
        
        <a class="tags-tag i-tag
            i-tag-other_3" href="https://www.guanngxu.com/EEBe6eBp1/">
            爬虫
        </a>
        
        <a class="tags-tag i-tag
            i-tag-primary" href="https://www.guanngxu.com/pkJGoZIqgD/">
            Angular
        </a>
        
        <a class="tags-tag i-tag
            i-tag-success" href="https://www.guanngxu.com/_9zQ4w6VQ/">
            自然语言处理
        </a>
        
    </div>
</div>

                </div>




            </div>


            <div class="site-footer">
  <a href="https://beian.miit.gov.cn" target="_blank">蜀ICP备2022021904号</a> | 
  <a class="rss" href="https://www.guanngxu.com/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>


    </div>
    <script>
        $('#sidebar').stickySidebar({
            topSpacing: 0,
            bottomSpacing: 0
        });
    </script>
    
</body>

</html>